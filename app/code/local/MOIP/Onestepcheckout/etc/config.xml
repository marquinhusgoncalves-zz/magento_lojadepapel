<?xml version="1.0"?>
<config>
    <modules>
        <MOIP_Onestepcheckout>
            <version>0.1.0</version>
        </MOIP_Onestepcheckout>
    </modules>
    <frontend>
        <secure_url>
            <onestepcheckout>/onestepcheckout/</onestepcheckout>
        </secure_url>
        <routers>
            <onestepcheckout>
                <use>standard</use>
                <args>
                    <module>MOIP_Onestepcheckout</module>
                    <frontName>onestepcheckout</frontName>
                </args>
            </onestepcheckout>
        </routers>
        <layout>
            <updates>
                <onestepcheckout>
                    <file>moip_onestepcheckout.xml</file>
                </onestepcheckout>
            </updates>
        </layout>
        <translate>
			<modules>
				<MOIP_Onestepcheckout>
					<files>
						<default>MOIP_Onestepcheckout.csv</default>
					</files>
				</MOIP_Onestepcheckout>
			</modules>
		</translate>
    </frontend>
    <admin>
        <routers>
			<onestepcheckout>
				<use>admin</use>
				<args>
					<module>MOIP_Onestepcheckout</module>
					<frontName>onestepcheckout</frontName>
				</args>
			</onestepcheckout>
        </routers>
    </admin>
    <adminhtml>
		
		
		<acl>
			<resources>
				<all>
					<title>Allow Everything</title>
				</all>
				<admin>
					<children>
						<MOIP_Onestepcheckout>
							<title>Onestepcheckout Module</title>
							<sort_order>10</sort_order>
						</MOIP_Onestepcheckout>
					
					    <system>
                            <children>
                                <config>
                                    <children>
                                        <onestepcheckout translate="title" module="onestepcheckout">
                                            <title>onestepcheckout</title>
                                        </onestepcheckout>
                                    </children>
                                </config>
                            </children>
                        </system>
					</children>
				</admin>
			</resources>
		</acl>
		<layout>
			<updates>
				<onestepcheckout>
					<file>moip_onestepcheckout.xml</file>
				</onestepcheckout>
			</updates>
		</layout>
		<translate>
			<modules>
				<MOIP_Onestepcheckout>
					<files>
						<default>MOIP_Onestepcheckout.csv</default>
					</files>
				</MOIP_Onestepcheckout>
			</modules>
		</translate>
    </adminhtml>   
    <global>
		<rewrite>
			<moip_onestepcheckout_index>
				<from><![CDATA[#^/checkout/onepage/#]]></from>
				<to>/onestepcheckout/index/</to>
			</moip_onestepcheckout_index>
		</rewrite>
        <models>
            <onestepcheckout>
                <class>MOIP_Onestepcheckout_Model</class>
                <resourceModel>onestepcheckout_mysql4</resourceModel>
            </onestepcheckout>
            <onestepcheckout_mysql4>
                <class>MOIP_Onestepcheckout_Model_Mysql4</class>
                <entities>
                    <onestepcheckout>
                        <table>moip_onestepcheckout</table>
                    </onestepcheckout>
                </entities>
            </onestepcheckout_mysql4>
			<sales>
              <rewrite>
                  <quote_address>MOIP_Onestepcheckout_Model_Sales_Quote_Address</quote_address>
              </rewrite>
			</sales>
			<customer>
              <rewrite>
                  <customer>MOIP_Onestepcheckout_Model_Customer_Customer</customer>
              </rewrite>			
			</customer>
        </models>
        <resources>
            <moip_onestepcheckout_setup>
                <setup>
                    <module>MOIP_Onestepcheckout</module>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </moip_onestepcheckout_setup>
            <onestepcheckout_write>
                <connection>
                    <use>core_write</use>
                </connection>
            </onestepcheckout_write>
            <onestepcheckout_read>
                <connection>
                    <use>core_read</use>
                </connection>
            </onestepcheckout_read>
        </resources>
        <blocks>
            <onestepcheckout>
                <class>MOIP_Onestepcheckout_Block</class>
            </onestepcheckout>
		 
        </blocks>
        <helpers>
            <onestepcheckout>
                <class>MOIP_Onestepcheckout_Helper</class>
            </onestepcheckout>
        </helpers>
        <events>
           <checkout_cart_add_product_complete>
           		<observers>
                <onstepcheckout>
                    <type>singleton</type>
                    <class>onestepcheckout/observer</class>
                    <method>checkout_cart_add_product_complete</method>
                </onstepcheckout>
            </observers>
           </checkout_cart_add_product_complete>      
    </events>
	<fieldsets>
	   <checkout_onepage_quote>
	   	<customer_tipopessoa>
		     <to_customer>tipopessoa</to_customer>
	        </customer_tipopessoa>
		<customer_nomefantasia>
		     <to_customer>nomefantasia</to_customer>
	        </customer_nomefantasia>
		<customer_razaosocial>
		     <to_customer>razaosocial</to_customer>
	        </customer_razaosocial>
		<customer_cnpj>
		     <to_customer>cnpj</to_customer>
	        </customer_cnpj>
		<customer_insestadual>
		     <to_customer>insestadual</to_customer>
	        </customer_insestadual>
	   </checkout_onepage_quote>
		<customer_account>
			<tipopessoa>
				<to_quote>customer_tipopessoa</to_quote>
			</tipopessoa>
			<nomefantasia>
				<to_quote>customer_nomefantasia</to_quote>
			</nomefantasia>
			<razaosocial>
				<to_quote>customer_razaosocial</to_quote>
			</razaosocial>	
			<cnpj>
				<to_quote>customer_cnpj</to_quote>
			</cnpj>
			<insestadual>
				<to_quote>customer_insestadual</to_quote>
			</insestadual>
		</customer_account>	   
	  </fieldsets>
	<fieldsets>
            <customer_account>
                 <tipopessoa><create>1</create><update>1</update><name>1</name></tipopessoa>
        		 <nomefantasia><create>1</create><update>1</update><name>1</name></nomefantasia>
        		 <razaosocial><create>1</create><update>1</update><name>1</name></razaosocial>
        		 <cnpj><create>1</create><update>1</update><name>1</name></cnpj>
        		 <insestadual><create>1</create><update>1</update><name>1</name></insestadual>
            </customer_account>	
        </fieldsets>
    </global>
	<default>
		<onestepcheckout>
			<config>
				<enabled>1</enabled>
				<default_paymentmethod>moip_transparente_standard</default_paymentmethod>
				<allowshippingotheraddress>1</allowshippingotheraddress>
				<allowguestcheckout>1</allowguestcheckout>
				<allowregister>1</allowregister>				
				<enable_buscacep>1</enable_buscacep>
				<enable_pj>1</enable_pj>
				<create_account>1</create_account>
				<style_color>000000</style_color>
				<botao_color>000000</botao_color>
				<default_country>BR</default_country>
			</config>
			<layout>
				<use_secure>1</use_secure>
				<page_titulo>Pagamento</page_titulo>
				<page_conteudo>Sua compra segura via Transparente</page_conteudo>
				<page_layout>3</page_layout>
				<style_cor>000000</style_cor>
				<botao_cor>000000</botao_cor>
				<page_conteudo>Preencha os dados para concluir seu pedido</page_conteudo>
				<allowsubscribenewsletter>2</allowsubscribenewsletter>
				<enable_quicklogin>1</enable_quicklogin>
			</layout>
			<addfield>
				<street_lines>4</street_lines>
				<addressbook>1</addressbook>				
				<allowcoupon>1</allowcoupon>				
				<showimageproduct>1</showimageproduct>
				<enable_giftmessage>0</enable_giftmessage>
			</addfield>
			<termcondition>
				<allow_options>1</allow_options>
				<content_options>Termos e condições do site...</content_options>
				<boxwidth>250</boxwidth>
				<boxheight>350</boxheight>
			</termcondition>
		</onestepcheckout>
	</default>
</config>
